server:
  port: 8086

spring:
  application:
    name: pasapiconnector
  datasource:
    # Aligned with Helm template: PAGW_AURORA_WRITER_ENDPOINT, PAGW_AURORA_PORT, PAGW_AURORA_DATABASE
    url: jdbc:postgresql://${PAGW_AURORA_WRITER_ENDPOINT:localhost}:${PAGW_AURORA_PORT:5432}/${PAGW_AURORA_DATABASE:pagw}?currentSchema=pagw
    username: ${PAGW_AURORA_USERNAME:postgres}
    password: ${PAGW_AURORA_PASSWORD:}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: ${PAGW_AURORA_MAX_POOL_SIZE:10}
      minimum-idle: ${PAGW_AURORA_MIN_IDLE:2}
  cloud:
    aws:
      region:
        static: ${AWS_REGION:us-east-2}
      credentials:
        use-default-aws-credentials-chain: true

# PAGW Configuration - aligned with Helm deployment templates
pagw:
  application-id: ${PAGW_APPLICATION_ID:pasapiconnector}
  aws:
    endpoint: ${PAGW_AWS_ENDPOINT:http://localhost:4566}
    region: ${AWS_REGION:us-east-2}
    account-id: ${AWS_ACCOUNT_ID:}
    aurora:
      writer-endpoint: ${PAGW_AURORA_WRITER_ENDPOINT:localhost}
      reader-endpoint: ${PAGW_AURORA_READER_ENDPOINT:}
      database: ${PAGW_AURORA_DATABASE:pagw}
      port: ${PAGW_AURORA_PORT:5432}
      secret-arn: ${PAGW_AURORA_SECRET_ARN:}
    sqs:
      enabled: true
      api-connectors-queue: ${PAGW_SQS_API_CONNECTORS_QUEUE:}
      callback-handler-queue: ${PAGW_SQS_CALLBACK_HANDLER_QUEUE:}
      dlq: ${PAGW_SQS_DLQ:}
    s3:
      request-bucket: ${PAGW_S3_REQUEST_BUCKET:pagw-request-dev}
      attachments-bucket: ${PAGW_S3_ATTACHMENTS_BUCKET:pagw-attachments-dev}
      audit-bucket: ${PAGW_S3_AUDIT_BUCKET:pagw-audit-dev}
    elasticache:
      endpoint: ${PAGW_ELASTICACHE_ENDPOINT:}
      port: ${PAGW_ELASTICACHE_PORT:6379}
      ssl-enabled: ${PAGW_ELASTICACHE_SSL_ENABLED:true}
    secrets:
      aurora-secret-arn: ${PAGW_AURORA_SECRET_ARN:}
  encryption:
    kms-enabled: ${PAGW_ENCRYPTION_KMS_ENABLED:false}
    kms-key-id: ${KMS_KEY_ID:}
  external:
    claims-pro-url: ${CLAIMS_PRO_URL:http://claims-pro:8080}
    claims-inst-url: ${CLAIMS_INST_URL:http://claims-inst:8080}
    claims-rx-url: ${CLAIMS_RX_URL:http://claims-rx:8080}
    carelon-url: ${CARELON_URL:http://carelon:8080}
    eapi-url: ${EAPI_URL:http://eapi:8080}

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
