{
  "info": {
    "name": "PAGW PAS Collection",
    "description": "Prior Authorization Gateway - PAS API Collection\n\n## Setup\n1. Import this collection into Postman\n2. Set the `baseUrl` variable to your environment\n3. For mock payer testing, start the Postman Mock Server\n\n## Roles\n- **Provider**: Sends PA requests to PAGW\n- **Payer (Mock)**: Receives requests from PAGW and returns responses",
    "_postman_id": "pagw-pas-collection-v1",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://pasorchestrator.pagwdev.awsdns.internal.das",
      "type": "string"
    },
    {
      "key": "mockPayerUrl",
      "value": "http://localhost:8081",
      "type": "string"
    },
    {
      "key": "correlationId",
      "value": "",
      "type": "string"
    },
    {
      "key": "pagwId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Provider Requests",
      "description": "Requests sent BY providers TO PAGW",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/actuator/health",
              "host": ["{{baseUrl}}"],
              "path": ["actuator", "health"]
            }
          },
          "response": []
        },
        {
          "name": "PAS Health",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/pas/v1/health",
              "host": ["{{baseUrl}}"],
              "path": ["pas", "v1", "health"]
            }
          },
          "response": []
        },
        {
          "name": "Submit PA Request (Sync)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "// Generate unique correlation ID",
                  "const correlationId = 'DEMO-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);",
                  "pm.collectionVariables.set('correlationId', correlationId);",
                  "console.log('Generated Correlation ID:', correlationId);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200 or 202', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 202]);",
                  "});",
                  "",
                  "pm.test('Response has pagwId', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.pagwId).to.exist;",
                  "    pm.collectionVariables.set('pagwId', jsonData.pagwId);",
                  "    console.log('PAGW ID:', jsonData.pagwId);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Correlation-ID",
                "value": "{{correlationId}}"
              },
              {
                "key": "X-Tenant-ID",
                "value": "ANTHEM"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"resourceType\": \"Bundle\",\n  \"type\": \"collection\",\n  \"meta\": {\n    \"profile\": [\"http://hl7.org/fhir/us/davinci-pas/StructureDefinition/profile-pas-request-bundle\"]\n  },\n  \"entry\": [\n    {\n      \"fullUrl\": \"urn:uuid:claim-001\",\n      \"resource\": {\n        \"resourceType\": \"Claim\",\n        \"id\": \"claim-001\",\n        \"status\": \"active\",\n        \"type\": {\n          \"coding\": [\n            {\n              \"system\": \"http://terminology.hl7.org/CodeSystem/claim-type\",\n              \"code\": \"professional\",\n              \"display\": \"Professional\"\n            }\n          ]\n        },\n        \"use\": \"preauthorization\",\n        \"patient\": {\n          \"reference\": \"Patient/pat-001\",\n          \"display\": \"John Doe\"\n        },\n        \"created\": \"2025-12-22\",\n        \"provider\": {\n          \"reference\": \"Organization/org-provider-001\",\n          \"display\": \"ABC Medical Group\"\n        },\n        \"insurer\": {\n          \"reference\": \"Organization/org-payer-001\",\n          \"display\": \"Anthem Blue Cross\"\n        },\n        \"priority\": {\n          \"coding\": [\n            {\n              \"system\": \"http://terminology.hl7.org/CodeSystem/processpriority\",\n              \"code\": \"normal\"\n            }\n          ]\n        },\n        \"insurance\": [\n          {\n            \"sequence\": 1,\n            \"focal\": true,\n            \"coverage\": {\n              \"reference\": \"Coverage/cov-001\"\n            }\n          }\n        ],\n        \"item\": [\n          {\n            \"sequence\": 1,\n            \"productOrService\": {\n              \"coding\": [\n                {\n                  \"system\": \"http://www.ama-assn.org/go/cpt\",\n                  \"code\": \"27447\",\n                  \"display\": \"Total Knee Replacement\"\n                }\n              ]\n            },\n            \"servicedDate\": \"2025-12-30\",\n            \"quantity\": {\n              \"value\": 1\n            }\n          }\n        ]\n      }\n    },\n    {\n      \"fullUrl\": \"urn:uuid:pat-001\",\n      \"resource\": {\n        \"resourceType\": \"Patient\",\n        \"id\": \"pat-001\",\n        \"identifier\": [\n          {\n            \"system\": \"http://anthem.com/member-id\",\n            \"value\": \"MEM123456789\"\n          }\n        ],\n        \"name\": [\n          {\n            \"family\": \"Doe\",\n            \"given\": [\"John\"]\n          }\n        ],\n        \"birthDate\": \"1970-05-15\",\n        \"gender\": \"male\"\n      }\n    },\n    {\n      \"fullUrl\": \"urn:uuid:cov-001\",\n      \"resource\": {\n        \"resourceType\": \"Coverage\",\n        \"id\": \"cov-001\",\n        \"status\": \"active\",\n        \"subscriber\": {\n          \"reference\": \"Patient/pat-001\"\n        },\n        \"beneficiary\": {\n          \"reference\": \"Patient/pat-001\"\n        },\n        \"payor\": [\n          {\n            \"reference\": \"Organization/org-payer-001\"\n          }\n        ]\n      }\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/pas/v1/submit?syncMode=true",
              "host": ["{{baseUrl}}"],
              "path": ["pas", "v1", "submit"],
              "query": [
                {
                  "key": "syncMode",
                  "value": "true"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Submit PA Request (Async)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "const correlationId = 'ASYNC-' + Date.now();",
                  "pm.collectionVariables.set('correlationId', correlationId);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 202 Accepted', function () {",
                  "    pm.expect(pm.response.code).to.equal(202);",
                  "});",
                  "",
                  "pm.test('Response has pagwId for tracking', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.pagwId).to.exist;",
                  "    pm.collectionVariables.set('pagwId', jsonData.pagwId);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Correlation-ID",
                "value": "{{correlationId}}"
              },
              {
                "key": "X-Tenant-ID",
                "value": "ANTHEM"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"resourceType\": \"Bundle\",\n  \"type\": \"collection\",\n  \"entry\": [\n    {\n      \"resource\": {\n        \"resourceType\": \"Claim\",\n        \"status\": \"active\",\n        \"type\": {\n          \"coding\": [{\"system\": \"http://terminology.hl7.org/CodeSystem/claim-type\", \"code\": \"professional\"}]\n        },\n        \"use\": \"preauthorization\",\n        \"patient\": {\"reference\": \"Patient/12345\"},\n        \"created\": \"2025-12-22\",\n        \"provider\": {\"reference\": \"Organization/67890\"},\n        \"priority\": {\"coding\": [{\"code\": \"normal\"}]},\n        \"insurance\": [{\"sequence\": 1, \"focal\": true, \"coverage\": {\"reference\": \"Coverage/ABC123\"}}]\n      }\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/pas/v1/submit?syncMode=false",
              "host": ["{{baseUrl}}"],
              "path": ["pas", "v1", "submit"],
              "query": [
                {
                  "key": "syncMode",
                  "value": "false"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Request Status",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.expect(pm.response.code).to.equal(200);",
                  "});",
                  "",
                  "pm.test('Response has status field', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.exist;",
                  "    console.log('Current Status:', jsonData.status);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Correlation-ID",
                "value": "{{correlationId}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/pas/v1/status/{{pagwId}}",
              "host": ["{{baseUrl}}"],
              "path": ["pas", "v1", "status", "{{pagwId}}"]
            }
          },
          "response": []
        },
        {
          "name": "PA Inquiry",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Correlation-ID",
                "value": "{{correlationId}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"resourceType\": \"Bundle\",\n  \"type\": \"collection\",\n  \"entry\": [\n    {\n      \"resource\": {\n        \"resourceType\": \"Claim\",\n        \"status\": \"active\",\n        \"type\": {\n          \"coding\": [{\"system\": \"http://terminology.hl7.org/CodeSystem/claim-type\", \"code\": \"professional\"}]\n        },\n        \"use\": \"preauthorization\",\n        \"identifier\": [\n          {\n            \"system\": \"http://pagw.anthem.com/pa-number\",\n            \"value\": \"PA-2025-12345\"\n          }\n        ],\n        \"patient\": {\"reference\": \"Patient/12345\"},\n        \"created\": \"2025-12-22\",\n        \"provider\": {\"reference\": \"Organization/67890\"}\n      }\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/pas/v1/inquiry",
              "host": ["{{baseUrl}}"],
              "path": ["pas", "v1", "inquiry"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Mock Payer Responses",
      "description": "Mock responses that simulate what a PAYER returns to PAGW.\n\nUse these with Postman Mock Server or WireMock to simulate payer behavior.",
      "item": [
        {
          "name": "Payer - Approve PA",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"resourceType\": \"ClaimResponse\",\n  \"id\": \"pa-response-001\",\n  \"status\": \"active\",\n  \"type\": {\n    \"coding\": [\n      {\n        \"system\": \"http://terminology.hl7.org/CodeSystem/claim-type\",\n        \"code\": \"professional\"\n      }\n    ]\n  },\n  \"use\": \"preauthorization\",\n  \"patient\": {\n    \"reference\": \"Patient/pat-001\"\n  },\n  \"created\": \"2025-12-22T10:30:00Z\",\n  \"insurer\": {\n    \"reference\": \"Organization/org-payer-001\",\n    \"display\": \"Anthem Blue Cross\"\n  },\n  \"outcome\": \"complete\",\n  \"disposition\": \"Prior Authorization Approved\",\n  \"preAuthRef\": \"PA-2025-ABC123\",\n  \"preAuthPeriod\": {\n    \"start\": \"2025-12-22\",\n    \"end\": \"2026-03-22\"\n  },\n  \"item\": [\n    {\n      \"itemSequence\": 1,\n      \"adjudication\": [\n        {\n          \"category\": {\n            \"coding\": [\n              {\n                \"system\": \"http://terminology.hl7.org/CodeSystem/adjudication\",\n                \"code\": \"submitted\"\n              }\n            ]\n          },\n          \"reason\": {\n            \"coding\": [\n              {\n                \"system\": \"http://hl7.org/fhir/us/davinci-pas/CodeSystem/X12278ReviewDecisionReasonCode\",\n                \"code\": \"A1\",\n                \"display\": \"Approved\"\n              }\n            ]\n          }\n        }\n      ]\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{mockPayerUrl}}/payer/pas/submit",
              "host": ["{{mockPayerUrl}}"],
              "path": ["payer", "pas", "submit"]
            },
            "description": "**Approved Response**\n\nUse this as a mock response when you want to simulate an APPROVED PA."
          },
          "response": [
            {
              "name": "Approved PA Response",
              "originalRequest": {
                "method": "POST",
                "url": {
                  "raw": "{{mockPayerUrl}}/payer/pas/submit"
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "body": "{\n  \"resourceType\": \"ClaimResponse\",\n  \"status\": \"active\",\n  \"outcome\": \"complete\",\n  \"disposition\": \"Prior Authorization Approved\",\n  \"preAuthRef\": \"PA-2025-ABC123\",\n  \"preAuthPeriod\": {\n    \"start\": \"2025-12-22\",\n    \"end\": \"2026-03-22\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Payer - Deny PA",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"resourceType\": \"ClaimResponse\",\n  \"id\": \"pa-response-denied\",\n  \"status\": \"active\",\n  \"type\": {\n    \"coding\": [\n      {\n        \"system\": \"http://terminology.hl7.org/CodeSystem/claim-type\",\n        \"code\": \"professional\"\n      }\n    ]\n  },\n  \"use\": \"preauthorization\",\n  \"patient\": {\n    \"reference\": \"Patient/pat-001\"\n  },\n  \"created\": \"2025-12-22T10:30:00Z\",\n  \"insurer\": {\n    \"reference\": \"Organization/org-payer-001\"\n  },\n  \"outcome\": \"complete\",\n  \"disposition\": \"Prior Authorization Denied - Medical necessity not established\",\n  \"item\": [\n    {\n      \"itemSequence\": 1,\n      \"adjudication\": [\n        {\n          \"category\": {\n            \"coding\": [\n              {\n                \"system\": \"http://terminology.hl7.org/CodeSystem/adjudication\",\n                \"code\": \"submitted\"\n              }\n            ]\n          },\n          \"reason\": {\n            \"coding\": [\n              {\n                \"system\": \"http://hl7.org/fhir/us/davinci-pas/CodeSystem/X12278ReviewDecisionReasonCode\",\n                \"code\": \"D1\",\n                \"display\": \"Denied\"\n              }\n            ]\n          }\n        }\n      ]\n    }\n  ],\n  \"error\": [\n    {\n      \"code\": {\n        \"coding\": [\n          {\n            \"system\": \"http://terminology.hl7.org/CodeSystem/adjudication-error\",\n            \"code\": \"MN001\",\n            \"display\": \"Medical necessity not established\"\n          }\n        ]\n      }\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{mockPayerUrl}}/payer/pas/submit",
              "host": ["{{mockPayerUrl}}"],
              "path": ["payer", "pas", "submit"]
            },
            "description": "**Denied Response**\n\nUse this as a mock response when you want to simulate a DENIED PA."
          },
          "response": [
            {
              "name": "Denied PA Response",
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "body": "{\n  \"resourceType\": \"ClaimResponse\",\n  \"status\": \"active\",\n  \"outcome\": \"complete\",\n  \"disposition\": \"Prior Authorization Denied\",\n  \"error\": [{\"code\": {\"text\": \"Medical necessity not established\"}}]\n}"
            }
          ]
        },
        {
          "name": "Payer - Pend PA (Need More Info)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"resourceType\": \"ClaimResponse\",\n  \"id\": \"pa-response-pended\",\n  \"status\": \"active\",\n  \"type\": {\n    \"coding\": [\n      {\n        \"system\": \"http://terminology.hl7.org/CodeSystem/claim-type\",\n        \"code\": \"professional\"\n      }\n    ]\n  },\n  \"use\": \"preauthorization\",\n  \"patient\": {\n    \"reference\": \"Patient/pat-001\"\n  },\n  \"created\": \"2025-12-22T10:30:00Z\",\n  \"insurer\": {\n    \"reference\": \"Organization/org-payer-001\"\n  },\n  \"outcome\": \"queued\",\n  \"disposition\": \"Pended - Additional clinical documentation required\",\n  \"communicationRequest\": [\n    {\n      \"reference\": \"CommunicationRequest/comm-req-001\"\n    }\n  ],\n  \"extension\": [\n    {\n      \"url\": \"http://hl7.org/fhir/us/davinci-pas/StructureDefinition/extension-infoneededcode\",\n      \"valueCodeableConcept\": {\n        \"coding\": [\n          {\n            \"system\": \"http://hl7.org/fhir/us/davinci-pas/CodeSystem/PASTempCodes\",\n            \"code\": \"clinical\",\n            \"display\": \"Clinical Information Needed\"\n          }\n        ]\n      }\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{mockPayerUrl}}/payer/pas/submit",
              "host": ["{{mockPayerUrl}}"],
              "path": ["payer", "pas", "submit"]
            },
            "description": "**Pended Response**\n\nUse this as a mock response when you want to simulate a PENDED PA that requires additional documentation."
          },
          "response": [
            {
              "name": "Pended PA Response",
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "body": "{\n  \"resourceType\": \"ClaimResponse\",\n  \"status\": \"active\",\n  \"outcome\": \"queued\",\n  \"disposition\": \"Pended - Additional documentation required\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Test Scenarios",
      "description": "End-to-end test scenarios",
      "item": [
        {
          "name": "Scenario 1: Happy Path - Approved",
          "item": [
            {
              "name": "1.1 Submit PA",
              "request": {
                "method": "POST",
                "header": [
                  {"key": "Content-Type", "value": "application/json"},
                  {"key": "X-Correlation-ID", "value": "SCENARIO1-{{$timestamp}}"},
                  {"key": "X-Tenant-ID", "value": "ANTHEM"}
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"resourceType\": \"Bundle\",\n  \"type\": \"collection\",\n  \"entry\": [\n    {\n      \"resource\": {\n        \"resourceType\": \"Claim\",\n        \"status\": \"active\",\n        \"type\": {\"coding\": [{\"code\": \"professional\"}]},\n        \"use\": \"preauthorization\",\n        \"patient\": {\"reference\": \"Patient/happy-path-patient\"},\n        \"created\": \"2025-12-22\",\n        \"provider\": {\"reference\": \"Organization/provider-001\"},\n        \"priority\": {\"coding\": [{\"code\": \"normal\"}]},\n        \"insurance\": [{\"sequence\": 1, \"focal\": true, \"coverage\": {\"reference\": \"Coverage/cov-001\"}}],\n        \"item\": [{\"sequence\": 1, \"productOrService\": {\"coding\": [{\"code\": \"27447\", \"display\": \"Total Knee Replacement\"}]}}]\n      }\n    }\n  ]\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/pas/v1/submit?syncMode=true",
                  "host": ["{{baseUrl}}"],
                  "path": ["pas", "v1", "submit"],
                  "query": [{"key": "syncMode", "value": "true"}]
                }
              }
            },
            {
              "name": "1.2 Check Status",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/pas/v1/status/{{pagwId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["pas", "v1", "status", "{{pagwId}}"]
                }
              }
            }
          ]
        },
        {
          "name": "Scenario 2: Async with Polling",
          "item": [
            {
              "name": "2.1 Submit Async",
              "request": {
                "method": "POST",
                "header": [
                  {"key": "Content-Type", "value": "application/json"},
                  {"key": "X-Correlation-ID", "value": "ASYNC-{{$timestamp}}"}
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"resourceType\": \"Bundle\",\n  \"type\": \"collection\",\n  \"entry\": [{\"resource\": {\"resourceType\": \"Claim\", \"use\": \"preauthorization\"}}]\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/pas/v1/submit?syncMode=false",
                  "host": ["{{baseUrl}}"],
                  "path": ["pas", "v1", "submit"],
                  "query": [{"key": "syncMode", "value": "false"}]
                }
              }
            },
            {
              "name": "2.2 Poll Status (repeat until complete)",
              "request": {
                "method": "GET",
                "url": {
                  "raw": "{{baseUrl}}/pas/v1/status/{{pagwId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["pas", "v1", "status", "{{pagwId}}"]
                }
              }
            }
          ]
        }
      ]
    }
  ]
}
